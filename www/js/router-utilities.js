angular.module('photo.services', [])

.factory('camService', ['$q', function($q) {
 
  return {
    getPicture: function(options) {
      var q = $q.defer();
      navigator.camera.getPicture(function(result) {
        q.resolve(result);
      }, function(err) {
        q.reject(err);
      }, options);
      
      return q.promise;
    },
    
    upload : function (imageURI) {
            var ft = new FileTransfer(),
            options = new FileUploadOptions();

            options.fileKey = "file";
            options.fileName = 'filename.jpg'; // We will use the name auto-generated by Node at the server side.
            options.mimeType = "image/jpeg";
            var serverURL = encodeURI('http://www.odiseo.com.ar/photo/?pepe=puto');
            //options.params = {"id": 2 , "sesion_id" : 1 , "fecha_creacion" : "12/12/14"}; 
            
             ft.upload(imageURI, serverURL,
                function (e) {
                   console.log(e);
                },
                function (e) {
                    alert("Upload failed");
                    console.log(e);
                }, options);
    },
  }
}])